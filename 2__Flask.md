## ⭐⭐⭐⭐ 챗GPT 가 생성한 학습자료입니다 ⭐⭐⭐⭐

# 🌐 웹 서버와 Python Flask

<br>


# 📚 목차 (Table of Contents)

1. 🌐 웹 서버란 무엇인가?

2. ✨ IP와 포트, 그리고 공유기의 역할
   
3. 🔨 localhost에서 Flask 서버 실행하기 
   
4. 🚪 Flask 서버를 외부에서 접속 가능하게 하려면?

<br>

---


# 🌐 1. 웹 서버란 무엇인가? 

<br>

### 🌍 웹 서버란?

- 웹 서버는 사용자의 요청(예: 웹페이지 보기, 데이터 전송 등)을 받아서,
  처리한 후 **응답을 돌려주는 컴퓨터 프로그램 또는 시스템**입니다.
- 웹 브라우저(크롬 등)는 이 웹 서버에 요청을 보내고, 웹 서버는 그에 맞는 HTML, JSON, 파일 등을 돌려줍니다.

> 쉽게 말해:  
> 🧑‍💻 사용자가 요청 → 🌐 웹 서버가 받음 → 📦 처리하고 → 🔁 결과를 사용자에게 응답


<br>


### 🐍 Flask란?

- **Flask**는 Python으로 만든 **간단한 웹 서버 프레임워크**입니다.
- 빠르게 웹 API나 서버를 만들 수 있도록 도와줍니다.

> Flask는 마치 Python으로 웹서버를 쉽게 열 수 있게 해주는 **작은 가게 텐트** 같은 것!

<br>

### ✅ 웹 서버는 어떻게 통신이 되는가?


1. 사용자가 브라우저에 주소를 입력하거나 앱에서 요청을 보냄  
   (예: `http://localhost:5000/hello`)

2. 컴퓨터는 해당 주소의 서버에 **HTTP 요청**을 보냄

3. 서버는 요청을 받아서 처리한 후, **HTTP 응답(Response)** 을 돌려줌  
   (예: JSON, HTML 등)

4. 클라이언트(브라우저 또는 앱)는 그 응답을 화면에 보여줌

> 내부적으로는 **IP 주소와 포트 번호**를 기반으로,  
> **TCP 소켓 통신**을 통해 데이터가 왔다 갔다 합니다.

<br>



### 🏠 localhost에서 웹 서버 실행하기란?

- 웹 서버를 **내 컴퓨터 안에서만 접근 가능하게** 실행하는 방식입니다.
- 주소는 보통 `localhost` 또는 `127.0.0.1`을 사용합니다.

📌 예시:
```
http://localhost:5000/hello
```
- 이 주소는 **"내 컴퓨터가 자기 자신에게 보내는 요청"** 입니다.  
- 외부(다른 컴퓨터나 스마트폰)에서는 **접속할 수 없습니다**.


<br>


### 🛜 외부에서 접속 가능하게 웹 서버 실행하기란?

- 웹 서버를 **다른 컴퓨터, 스마트폰 등 외부 기기에서도 접근 가능하게 실행**하는 방식입니다.
- 보통 **내 컴퓨터의 IP 주소**를 통해 접속할 수 있게 설정합니다.

```
http://<내 컴퓨터 IP 주소>:포트번호
```

- 외부에서 내 컴퓨터에 접속하려면, 내 컴퓨터가 외부 요청을 받을 수 있도록 설정해야 합니다.



<br>

---

  
# ✨ 2. IP와 포트, 그리고 공유기의 역할

<br>


### 1️⃣ 외부 IP란?

- 인터넷에 연결된 **모든 집이나 회사**는 고유한 **외부 IP 주소**를 하나씩 갖습니다.
- 마치 "우리 집 주소"처럼, 인터넷 세상에서 **우리 집(공유기)** 을 찾기 위한 주소입니다.

📌 예:
```
123.45.67.89 ← 이게 외부 IP
```


<br>



### 2️⃣ 포트란?

- IP 주소는 `어느 집`인지를 알려주고,  
  **포트 번호**는 `그 집 안의 어떤 문`인지를 나타냅니다.


📌 예:
```
123.45.67.89:5000 ← 집 주소 + 특정 문
```

- 웹 브라우저나 앱은 이 포트를 통해 서버에 요청을 보냅니다.  
- 서버는 특정 포트를 열어놓고, 거기로 들어오는 요청을 처리해요.

> IP는 주소, 포트는 문 번호!


<br>



### 3️⃣ 내부 IP란? 공유기의 역할은?


- **공유기(Router)** 는 집에서 인터넷을 나눠주는 장치입니다.  
- 외부에서는 하나의 **공유기 주소(외부 IP)** 만 보이지만,  
  집 안에는 기기가 여러 대 있고, 각자 고유한 내부 IP를 가집니다.


📌 예:
```
공유기의 외부 IP: 123.45.67.89

내 PC:         192.168.0.10  
형의 노트북:   192.168.0.11  
동생의 태블릿: 192.168.0.12
```

📌 문제는?

외부에서 아래와 같은 요청이 들어올 때:

```
http://123.45.67.89:5000
```

> 공유기는 “어느 기기로 이 요청을 보내야 하지?”를 모릅니다.  
> 그래서 기본적으로는 이런 요청을 **막아버리거나 무시**합니다.

> 이때 필요한 것이 바로 **포트포워딩**입니다.


<br>



### 4️⃣ 포트포워딩이란?

- **공유기에게 "이 포트로 들어온 요청은 이 컴퓨터로 보내!"** 라고 알려주는 설정입니다.

📌 예:
> "외부에서 123.45.67.89:5001으로 요청이 오면  
→ 192.168.0.10:5001으로 전달해줘"

> "외부에서 123.45.67.89:5002으로 요청이 오면  
→ 192.168.0.11:5002으로 전달해줘"

- 이렇게 설정해줘야 웹서버가 **외부에서도 요청을 받을 수 있게 됩니다.**


<br>


---


# 🔨 3. localhost에서 Flask 서버 실행하기

<br>



### 🔧 1) 사전 준비

1. Python 설치 (https://www.python.org/)
2. Flask 설치
```bash
pip install flask
```


<br>


### 🚀 2) 서버 코드 작성 (hello_server.py)

```python
from flask import Flask, request, jsonify

app = Flask(__name__)

# 간단한 데이터 저장소
data_store = {}

# 데이터 저장 (POST)
@app.route('/save', methods=['POST'])
def save_data():
    json_data = request.get_json()
    data_store['value'] = json_data.get('value')
    return jsonify({"message": "저장 완료!"})

# 데이터 조회 (GET)
@app.route('/load', methods=['GET'])
def load_data():
    return jsonify({"value": data_store.get('value', None)})

if __name__ == '__main__':
    app.run(debug=True)
```


<br>


### ▶️ 3) 서버 실행

```bash
python hello_server.py
```

- 기본적으로 `http://127.0.0.1:5000` 에 서버가 열립니다.

> ❗위의 코드를 실행한 컴퓨터에서만 해당 서버에 접속 가능!

<br>


### 🧪 4-1) 간단한 테스트 (Linux)

1. [POST 요청] 저장:
```bash
curl -X POST http://localhost:5000/save -H "Content-Type: application/json" -d "{"value": 30}"
```

2. [GET 요청] 불러오기:
```bash
curl http://localhost:5000/load
```

<br>

### 🖥️ 4-2) Postman 으로 테스트 (Windows)


**❗Postman 설치하기**

```
아래 링크에서 다운로드
```

[https://www.postman.com/downloads/](https://www.postman.com/downloads/)

<br>

**POST 요청 예시**

```

1. 상단에서 [POST] 선택
2. 주소 입력: http://localhost:5000/save
3. 아래 탭에서 Body → raw → JSON 선택
4. 데이터 입력: { "value": "30" }
5. "Send" 클릭 → 서버에 데이터 전송

```


<br>

**GET 요청 예시**

```
1. Postman 실행
2. 상단에서 [GET] 선택
3. 주소 입력: http://localhost:5000/load
4. "Send" 클릭
5. 하단에 응답(JSON)이 표시됨
```



<br>


---

# 🚪 4. Flask 서버를 외부에서 접속 가능하게 하려면?

### 🛠 1) 서버 설정 변경

```python
# app.run(debug=True) → 아래처럼 변경
app.run(debug=True, host='0.0.0.0')
```

- `0.0.0.0`은 **"모든 외부 IP에서 접근 가능"** 하도록 설정하는 의미입니다.


<br>

### 🌀 2) 내부 IP 주소 확인 (Windows 기준)

1) `윈도우 키` + `R` 누르기  
2) `cmd` 입력 후 엔터  
3) 검은색 창에서 아래 명령어 입력:
   ```
   ipconfig
   ```
4) 출력 결과 중 **IPv4 주소** 확인  
   예시: `IPv4 주소 .......... : 192.168.0.3`


<br>

### 📡 3) 공유기 포트 포워딩 (ipTIME 기준)

1. 브라우저에서 `192.168.0.1` 접속 (공유기 관리자 페이지)
2. 로그인 후, **관리도구 → 고급 설정 → NAT/라우터 관리 → 포트포워딩** 메뉴 이동
3. `새규칙 추가` 클릭:
4. 규칙 내용 작성:
   - **규칙이름**: 아무거나 입력
   - **내부 IP 주소**: 위의 2번에서 확인한 내부 IP (예: `192.168.0.3`)
   - **내부 포트 / 외부 포트**: `5000`
   - **프로토콜**: TCP
5. `적용` 클릭

<br>


### 🌍 4) 외부에서 접속 테스트

- 스마트폰이나 다른 기기에서 접속:
```
http://<외부IP>:5000/load
```

(공인IP는 https://ip.pe.kr/ 등에서 확인 가능)

> 단, 방화벽이나 보안 프로그램이 5000번 포트를 막고 있다면 접속이 안 될 수 있으니 예외 설정 필요!

✅ 이로써 로컬 Flask 서버를 외부에서도 접근할 수 있도록 설정 완료!

<br>

---



